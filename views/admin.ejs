<!DOCTYPE html>
<html>
  <head>
    <title><%= title %></title>
    <link rel='stylesheet' href='/stylesheets/style.css'/>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
    <script src="/javascripts/moment.min.js"></script>
    <style>
        thead th{
            color: white;
            background-color: #EC6715;
            border: 1px solid #c7c7c7;
        }
        tbody td{
            color: black;
            text-align: center;
            border: 1px solid #c7c7c7;
            background-color: #f2f2f2;
        }
    </style>
</head>
  <body class="bg-hope font-sans">
    <% include ./navbar-admin %>
    <div class="bg-white">
        <br>
        <table style="width: 98%; margin: 0 auto;">
            <thead>
                <tr>
                    <th>Date</th>
                    <th>Time</th>
                    <th>Name</th>
                    <th>Phone Number</th>
                    <th>Email</th>
                    <th>Companions</th>
                </tr>
            </thead>
            <tbody>
                <% slots.forEach(slot => { %>
                    <tr class="cursor-pointer">
                        <td class="dates text-transparent"><%=slot.date%></td>
                        <td><%=slot.time%></td>
                        <td><%=slot.firstName + ' ' + slot.lastName%></td>
                        <td><%=slot.phoneNumber%></td>
                        <td class="<%=!slot.emailAddress ? 'text-gray-800 italic' : 'text-black not-italic'%>"><%=slot.emailAddress ? slot.emailAddress : 'not provided'%></td>
                        <td><%=slot.companions.length%> companion(s)</td>
                    </tr>
                <% }) %>
            </tbody>
        </table>
        <br>
    </div>

    <div class="absolute w-full h-full flex justify-center top-0 left-0">
        <!-- MODAL BACKGROUND -->
        <div class="absolute w-full h-full bg-black opacity-50 top-0 left-0 cursor-pointer overflow-hidden"></div>
        <!-- MODAL CONTENT -->
        <div class="absolute md:w-1/2 sm:w-3/4 h-auto bg-white rounded-sm shadow-lg flex flex-col justify-center mt-10 py-8 max-h-full overflow-y-scroll" style="border: 1px solid red;">
            <div class="top-0 w-auto flex mx-10">
                <span class="font-medium">Time Slot Details</span>
                <span class="material-icons ml-auto" style="cursor: pointer !important;" id="CLOSE-MODAL">close</span>
            </div>
            <br>
            <div class="w-auto flex mx-10">
                <div class="w-1/2 px-3">
                  <label class="block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2" for="grid-first-name">
                    First Name
                  </label>
                  <input class="appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 leading-tight focus:outline-none focus:bg-white focus:border-gray-500" id="grid-first-name" type="text" placeholder="Enter First Name" name="firstName">
                </div>
                <div class="w-1/2 px-3">
                  <label class="block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2" for="grid-last-name">
                    Last Name
                  </label>
                  <input class="appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 leading-tight focus:outline-none focus:bg-white focus:border-gray-500" id="grid-last-name" type="text" placeholder="Enter Last Name" name="lastName">
                </div>
            </div>
            <br>
            <div class="w-auto mx-10">
                <div class="w-full px-3">
                  <label class="block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2" for="grid-password">
                    Phone Number
                  </label>
                  <input class="appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white focus:border-gray-500" id="grid-password" type="text" placeholder="Enter Phone Number" name="phoneNumber">
                </div>
                <div class="w-full px-3">
                  <label class="block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2" for="grid-password">
                    Email Address <span>(optional)</span>
                  </label>
                  <input class="appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white focus:border-gray-500" id="grid-password" type="text" placeholder="Enter Email Address (optional)" name="emailAddress">
                </div>
            </div>
            <br>

            <!-- THIS IS ONE COMPANION -->
            <div class="mx-10 w-auto flex flex-col">
                <div class="w-auto flex">
                    <div class="w-1/2 px-3">
                      <label class="block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2" for="companion-first-name">
                        COMPANION #1
                      </label>
                      <input class="appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 leading-tight focus:outline-none focus:bg-white focus:border-gray-500" id="companion-1-first-name" type="text" placeholder="Enter First Name" name="companion-first-name[]">
                    </div>
                    <div class="w-1/2 px-3">
                      <label class="block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2" for="companion-last-name">
                        &nbsp;
                      </label>
                      <input class="appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 leading-tight focus:outline-none focus:bg-white focus:border-gray-500" id="companion-1-last-name" type="text" placeholder="Enter Last Name" name="companion-last-name[]">
                    </div>
                </div>
                
                <button class="bg-transparent hover:bg-red-500 text-red-700 font-semibold hover:text-white py-2 px-4 border border-red-500 hover:border-transparent rounded ml-auto mr-3 my-3">
                    DELETE
                </button>
            </div>


            <div class="mx-10 w-auto flex flex-col">
                <div class="w-auto flex">
                    <div class="w-1/2 px-3">
                      <label class="block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2" for="companion-first-name">
                        COMPANION #2
                      </label>
                      <input class="appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 leading-tight focus:outline-none focus:bg-white focus:border-gray-500" id="companion-1-first-name" type="text" placeholder="Enter First Name" name="companion-first-name[]">
                    </div>
                    <div class="w-1/2 px-3">
                      <label class="block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2" for="companion-last-name">
                        &nbsp;
                      </label>
                      <input class="appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 leading-tight focus:outline-none focus:bg-white focus:border-gray-500" id="companion-1-last-name" type="text" placeholder="Enter Last Name" name="companion-last-name[]">
                    </div>
                </div>
                
                <button class="bg-transparent hover:bg-red-500 text-red-700 font-semibold hover:text-white py-2 px-4 border border-red-500 hover:border-transparent rounded ml-auto mr-3 my-3">
                    DELETE
                </button>
            </div>

            <br>
            <button class="bg-transparent hover:bg-hope text-hopes font-semibold hover:text-white py-2 px-4 border border-hope hover:border-transparent rounded mx-12">
                ADD A COMPANION
            </button>

            
        </div>

    
    </div>

    </div>
  </body>
  <script>
      $('.dates').each(function(index){
        let date = new Date(parseInt($(this).text()));
        $(this).text( moment(date).format('LL') );
        $(this).removeClass("text-transparent");
      })
  </script>
</html>
